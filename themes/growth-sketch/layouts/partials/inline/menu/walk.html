{{- define "partials/inline/menu/walk.html" }}
  {{- $page := .page }}
  {{- range .menuEntries }}
    {{- $attrs := dict "href" .URL "class" "nav-link" }}
    {{- $class := "nav-item" }}
    {{- if $page.IsMenuCurrent .Menu . }}
      {{- $attrs = merge $attrs (dict "class" "nav-link active" "aria-current" "page") }}
      {{- $class = "nav-item active" }}
    {{- else if $page.HasMenuCurrent .Menu . }}
      {{- $attrs = merge $attrs (dict "class" "nav-link ancestor" "aria-current" "true") }}
      {{- $class = "nav-item ancestor" }}
    {{- end }}

    {{- if .HasChildren }}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle pb-0" href="#" id="navbarDropdown-{{ .Name | urlize }}" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          {{ .Name }}
        </a>
        <ul class="dropdown-menu border-0 bg-light end-0 text-end text-md-start" aria-labelledby="navbarDropdown-{{ .Name | urlize }}">
          {{- range .Children }}
            <!-- No deeper nesting allowed; only first-level items -->
            <li>
              <a class="dropdown-item" href="{{ .URL }}">
                {{ .Name }}
              </a>
            </li>
          {{- end }}
        </ul>
      </li>
    {{- else }}
      <li class="{{ $class }}">
        <a
          {{- range $k, $v := $attrs }}
            {{- with $v }}
              {{- printf " %s=%q" $k $v | safeHTMLAttr }}
            {{- end }}
          {{- end -}}
        >{{ .Name }}</a>
      </li>
    {{- end }}
  {{- end }}
{{- end }}
